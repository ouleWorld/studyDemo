<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>跨域demo</title>
    <style type="text/css">
        .ajaxButton {
            width: 100px;
            height: 50px;
            background: blue;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body>
<div class="ajaxButton">发送请求</div>
<script>
    const log = console.log.bind(console)

    const ajax = (method, url, data) => {
        let r = new XMLHttpRequest()
        r.open(method, url, true)
        r.setRequestHeader('Content-Type', 'application/json')
        r.onload = () => {
            log('r', r.response)
        }
        r.onerror = () => {

        }
        r.send(data)
    }

    const bindEvent = () => {
        let ele = document.querySelector('.ajaxButton')
        ele.addEventListener('click', function () {
            let url = '/api/singlecors'
            let method = 'GET'
            let data = ''
            ajax(method, url, data)
        })
    }

    const __main = () => {
        bindEvent()
    }

    __main()
</script>
</body>
</html>